"""
Network-secured version of BotNet/Beaconing.py
Modified to use internal Docker network (consumer service)
"""

import requests
import time
import random

# SECURITY: Use internal Docker network address
c2_server = "http://consumer:5000/beacon"
beacon_interval = random.randint(10, 60)
headers = {"User-Agent": "botnet-victim/1.0"}

print("[Beaconing] Starting C2 beacon simulation")
print(f"[Beaconing] Target: {c2_server}")
print(f"[Beaconing] Interval: {beacon_interval}s")

while True:
    data = {"id": random.randint(1000, 9999), "status": "online"}
    try:
        response = requests.post(c2_server, json=data, headers=headers, timeout=5)
        print(f"[Beaconing] C2 POST: {response.status_code}")
    except Exception as e:
        print(f"[Beaconing] C2 conn error: {e}")
    time.sleep(beacon_interval)
