"""
Network-secured version of BruteForce/SshBruteForce.py
Modified to use internal Docker network - uses socket simulation
"""

import socket
import time
import random

# SECURITY: Use internal Docker network address
target_ip = "consumer"
target_port = 22  # SSH port
username = "admin"
passwords = ["123456", "admin", "password", "qwerty"]

print(f"[SSH BruteForce] Starting SSH brute force simulation")
print(f"[SSH BruteForce] Target: {target_ip}:{target_port}")
print("[SSH BruteForce] Note: paramiko not installed - using socket simulation")


def simulate_ssh_attempt(hostname, username, password):
    """Simulate SSH connection attempt without paramiko"""
    try:
        sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
        sock.settimeout(3)
        result = sock.connect_ex((hostname, target_port))
        sock.close()
        return result == 0
    except Exception:
        return False


while True:
    for pwd in passwords:
        print(f"[SSH BruteForce] Attempt: {username}:{pwd} @ {target_ip}")
        result = simulate_ssh_attempt(target_ip, username, pwd)
        print(f"[SSH BruteForce] Port reachable: {result}")
        time.sleep(random.uniform(1.0, 3.0))

    time.sleep(random.randint(40, 120))
